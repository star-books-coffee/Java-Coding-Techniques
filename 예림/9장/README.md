## 9.1 정적 코드 분석 도구

- 정적 분석 도구는 코드를 분석하고 잠재적인 버그나 코드 스멜을 찾는다
- 컴파일 오류와 기능적 오류를 넘어서는 특정 유형의 문제를 코드에서 자동으로 감지할 수 있으며 심지어 수정을 도와주는 도구도 있음
- 오픈 소스이고 무료로 사용할 수 있음
- SpotBugs
    - 파일 또는 IDE가 문제가 발생할 만한 코드 조각만 알려줄 뿐 수정본은 제공하지 않음
    - 경고를 받을 때마다 정말 문제인지 아닌지 확인해야 함
    - 비슷한 도구 : Checkstyle, PMD
- Error Prone
    - 자바 컴파일러를 개선
    - 더 고급 타입 검증을 수행해 수많은 이슈에 대한 수정본 제안
    - 긍정 오류도 거의 없을 뿐 아니라 문제를 찾으면 수정본도 함께 제안
- 인텔리제이의 Code Inspection
    - 클릭 한 번만으로 코드 리팩터링 가능

## 9.2 팀 내 자바 포맷 통일

- 옳고 그름은 없음
- 중요한 것은 계속된 재서식화나 버그를 피하려면 팀원 전원이 하나의 일관된 서식화 방식에 동의해야 함
- 더 좋은 방법은 업계 표준을 쓰는 것
    - 구글 자바 스타일 가이드

## 9.3 빌드 자동화

- 일반적으로 서로 다른 운영체제나 IDE에서 작업하려고 함
- 해결책은 모든 시스템에서 같은 방식으로 동작하면서 개발자 장비와 독립적인 정교한 빌드 도구나 언어로 빌드를 자동화하는 것
    - Gradle, Maven, Ant 등
- 빌드를 자동화하려면 빌드 파일을 작성해 프로젝트에 넣어야 함

## 9.4 지속적 통합

- 광범위한 테스트와 통합, 코드 품질 검증 등 모든 과정을 지속적 통합 서버라는 전용 장비에 위탁할 수 있음
- 버전 제어 시스템에 커밋할 때마다 전용 서버가 코드를 모두 가져와 전체 테스트를 실행하고 완벽히 통합된 실행 파일을 빌드함
- 이후 코드 품질에 대한 타임라인을 생성함
- 사용자 서버에는 젠킨스(Jenkins)를 설치할 수 있음
- 전용 품질 분석 서버로는 소나큐브(SonarQube)가 많이 쓰임
- Travis-CI, Cadacy 등 테스트와 품질 분석에 사용할 만한 클라우드 서비스도 다양함

## 9.5 생산 준비와 납품

- 생산으로 가면 예상치 못한 오류, 동작이 쇄도함
- 대비의 일환으로 로그, 수치, 대시보드, 알람 형태로 감시를 구현함
- 콘솔 출력 대신 로깅 → 모든 로그가 모일 중앙 위치를 설정 → 로그를 검색할 수 있고 분석하고 수치를 계산해 대시보드에 시각화할 수 있다면 금상첨화
- 오픈소스 엘라스틱 스택, 백엔드에는 에어 브레이크, 프론트엔드에는 센트리 추천

## 9.6 콘솔 출력 대신 로깅

- Log4j를 활용하면 전체 프로그램을 아우르는 설정에 기반해 클래스에 특화된 메시지를 작성하는 내부 Logger 작성 가능

## 9.7 다중 스레드 코드 최소화 및 독립

- 성능 벤치마크에서 심각한 결과가 나오는 등 적절한 근거가 생기기 전에는 때이른 최적화와 다중 스레드 코딩은 하지 말자
    - 너무 느릴 때만 다중 스레드를 활용하자
- 동시 실행 코드를 작성한다면 코드 기반에서 최소한의 패키지만 제한시키는 등 가능하면 다중 스레드 코드를 독립적으로 분리시키고 완벽히 설명하기
- 가변 데이터는 경합 조건이나 갱신 무효와 같은 동시 실행 버그를 일으키기 쉬움
    - 가변 상태보다 불변 상태 사용

## 9.8 고급 동시 실행 추상화 사용하기

- 동기화 프리미티브는 volatile과 synchronized와 같은 키워드로 코드 내 임계 영역을 표시할 때 사용
    - 하지만 공정성과 같은 특수한 다중 스레드 요구사항을 만족시키기 까다로움
- 동시 실행 코드 작성에 쓰이는 고급 클래스는 눈부신 향상을 보임
- 동시 실행 프로그래밍 책 추천
    - <자바 동시 실행 실전>, <JVM에서 동시 실행 프로그래밍>

## 9.9 프로그램 속도 향상

- 부수 효과가 없는 순차적 스트림은 (잠재적으로) 작업을 코어 여러 개에 분산해 병렬로 작업을 실행할 수 있음
- 스트림을 sequential()에서 parellel()로 바꾸기만 하면 됨
- Collection에서는 StreamParallel()을 써서 직접 병렬 스트림을 생성할 수 있음

## 9.10 틀린 가정 알기

- 코드에서 너무 많이 가정하지 말고 그 작업을 그냥 클래스의 사용자에게 넘기자
- 형식에 대해 상세히 알지 못하면 최소한으로 가정하는 것이 최선임
- 틀린 가정
    - 이메일 주소, 우편번호, CSV 파일, 즐겨 쓰이는 표준대
    - 두 국지적인 지역 간 낮의 차이를 분 단위로 **올바르게** 계산하기란 엄청 어려움
- 현실 세계에 맞도록 코드를 준비하려면 순전히 가정만으로 코드가 이끌려 가기전에 항상 한 번더 생각해야 함